{"version":3,"sources":["scripts/app-9aa2ed7dae.js"],"names":["TreeNode","id","description","aditionalInfo","undefined","Error","this","children","expanded","TreeNodeFactory","angular","module","factory","prototype","addChild","childNode","parent","push","__filter","query","node","toLowerCase","includes","some","bind","filter","toggle","expandChildren","forEach","isRootNode","selfDelete","_this","thisNodeIndex","findIndex","splice","child","$provide","value","DATETIME_FORMATS","AMPMS","DAY","ERANAMES","ERAS","FIRSTDAYOFWEEK","MONTH","SHORTDAY","SHORTMONTH","STANDALONEMONTH","WEEKENDRANGE","fullDate","longDate","medium","mediumDate","mediumTime","short","shortDate","shortTime","NUMBER_FORMATS","CURRENCY_SYM","DECIMAL_SEP","GROUP_SEP","PATTERNS","gSize","lgSize","maxFrac","minFrac","minInt","negPre","negSuf","posPre","posSuf","localeID","pluralCat","n","opt_precision","i","vf","v","Math","min","indexOf","length","base","pow","f","HomeController","$log","$rootScope","$translate","$timeout","vm","setExpandForChildren","expand","selectedNode","productTree","getNodeFormModalElement","document","querySelector","closeNodeFormModal","classList","add","nodeFormAction","nodeForm","validateNodeForm","idIsValid","descriptionIsValid","nodeFilter","switchLanguage","language","use","selectNode","isNodeSelected","collapseChildren","deleteCurrentNode","selectedNodeIndex","openNodeFormModal","$event","action","reference","currentTarget","then","referenceElement","message","toast","createElement","setAttribute","innerText","body","appendChild","Popper","placement","parentNode","removeChild","modal","remove","submitNodeFormModal","newNode","createNewNode","Object","assign","editCurrentNode","rootNode","subNode1","subNode2","subNode2Child","initalizeTree","component","controller","controllerAs","templateUrl","runBlock","$document","tmhDynamicLocale","$on","event","data","set","documentElement","debug","run","routerConfig","$stateProvider","$urlRouterProvider","state","url","otherwise","config","constant","configBlock","$locationProvider","$logProvider","$translateProvider","tmhDynamicLocaleProvider","html5Mode","debugEnabled","useStaticFilesLoader","prefix","suffix","preferredLanguage","fallbackLanguage","useSanitizeValueStrategy","useMissingTranslationHandlerLog","localeLocationPattern","defaultLocale","$templateCache","put"],"mappings":"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","file":"../../scripts/app-9aa2ed7dae.js","sourcesContent":["\"use strict\";\n\n(function () {\n  'use strict';\n\n  angular.module('app', ['pascalprecht.translate', 'tmh.dynamicLocale', 'ui.router', 'ngAnimate']);\n})();\n\n\n\"use strict\";\n\nangular.module('app').factory('TreeNodeFactory', TreeNodeFactory);\n\nfunction TreeNode(id, description, aditionalInfo) {\n  if (id == null || id == undefined) {\n    throw new Error('Missing required property id');\n  }\n\n  if (description == null || description == undefined) {\n    throw new Error('Missing required property description');\n  }\n\n  this.id = id;\n  this.description = description;\n  this.children = [];\n  this.expanded = true;\n\n  if (aditionalInfo) {\n    this.aditionalInfo = aditionalInfo;\n  }\n}\n\nTreeNode.prototype.addChild = function (childNode) {\n  if (childNode == null || !(childNode instanceof TreeNode)) {\n    throw new Error('Invalid parameter for function addChild');\n  }\n\n  childNode.parent = this;\n  this.children.push(childNode);\n  return this;\n};\n\nTreeNode.prototype.__filter = function (query, node) {\n  return node.id.toLowerCase().includes(query) || node.description.toLowerCase().includes(query) || node.children.some(this.__filter.bind(this, query));\n};\n\nTreeNode.prototype.filter = function (query) {\n  return this.__filter(query.toLowerCase(), this);\n};\n\nTreeNode.prototype.toggle = function () {\n  this.expanded = !this.expanded;\n};\n\nTreeNode.prototype.expandChildren = function (expanded) {\n  this.expanded = expanded == null || expanded == undefined ? !this.expanded : expanded;\n  this.children.forEach(function (node) {\n    return node.expandChildren(expanded);\n  });\n};\n\nTreeNode.prototype.isRootNode = function () {\n  return this.parent == null || this.parent == undefined;\n};\n\nTreeNode.prototype.selfDelete = function () {\n  var _this = this;\n\n  if (this.parent) {\n    var thisNodeIndex = this.parent.children.findIndex(function (node) {\n      return node === _this;\n    });\n    this.parent.children.splice(thisNodeIndex, 1);\n    this.parent = null;\n  }\n\n  this.children.forEach(function (child) {\n    return child.parent == null;\n  });\n  this.children = null;\n};\n\nfunction TreeNodeFactory() {\n  return TreeNode;\n}\n\n\n\"use strict\";angular.module(\"ngLocale\",[],[\"$provide\",function($provide){var PLURAL_CATEGORY_ONE=\"one\",PLURAL_CATEGORY_FEW=\"few\",PLURAL_CATEGORY_MANY=\"many\",PLURAL_CATEGORY_OTHER=\"other\";$provide.value(\"$locale\",{DATETIME_FORMATS:{AMPMS:[\"ДП\",\"ПП\"],DAY:[\"воскресенье\",\"понедельник\",\"вторник\",\"среда\",\"четверг\",\"пятница\",\"суббота\"],ERANAMES:[\"до Рождества Христова\",\"от Рождества Христова\"],ERAS:[\"до н. э.\",\"н. э.\"],FIRSTDAYOFWEEK:0,MONTH:[\"января\",\"февраля\",\"марта\",\"апреля\",\"мая\",\"июня\",\"июля\",\"августа\",\"сентября\",\"октября\",\"ноября\",\"декабря\"],SHORTDAY:[\"вс\",\"пн\",\"вт\",\"ср\",\"чт\",\"пт\",\"сб\"],SHORTMONTH:[\"янв.\",\"февр.\",\"мар.\",\"апр.\",\"мая\",\"июн.\",\"июл.\",\"авг.\",\"сент.\",\"окт.\",\"нояб.\",\"дек.\"],STANDALONEMONTH:[\"январь\",\"февраль\",\"март\",\"апрель\",\"май\",\"июнь\",\"июль\",\"август\",\"сентябрь\",\"октябрь\",\"ноябрь\",\"декабрь\"],WEEKENDRANGE:[5,6],fullDate:\"EEEE, d MMMM y 'г'.\",longDate:\"d MMMM y 'г'.\",medium:\"d MMM y 'г'. H:mm:ss\",mediumDate:\"d MMM y 'г'.\",mediumTime:\"H:mm:ss\",short:\"dd.MM.y H:mm\",shortDate:\"dd.MM.y\",shortTime:\"H:mm\"},NUMBER_FORMATS:{CURRENCY_SYM:\"₽\",DECIMAL_SEP:\",\",GROUP_SEP:\" \",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:\"-\",negSuf:\"\",posPre:\"\",posSuf:\"\"},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:\"-\",negSuf:\" ¤\",posPre:\"\",posSuf:\" ¤\"}]},id:\"ru\",localeID:\"ru\",pluralCat:function(n,opt_precision){var i=0|n,vf=function(n,opt_precision){var v=opt_precision;void 0===v&&(v=Math.min(function(n){var i=(n+=\"\").indexOf(\".\");return-1==i?0:n.length-i-1}(n),3));var base=Math.pow(10,v);return{v:v,f:(n*base|0)%base}}(n,opt_precision);return 0==vf.v&&i%10==1&&i%100!=11?PLURAL_CATEGORY_ONE:0==vf.v&&2<=i%10&&i%10<=4&&(i%100<12||14<i%100)?PLURAL_CATEGORY_FEW:0==vf.v&&i%10==0||0==vf.v&&5<=i%10&&i%10<=9||0==vf.v&&11<=i%100&&i%100<=14?PLURAL_CATEGORY_MANY:PLURAL_CATEGORY_OTHER}})}]);\n\"use strict\";angular.module(\"ngLocale\",[],[\"$provide\",function($provide){var PLURAL_CATEGORY_ONE=\"one\",PLURAL_CATEGORY_OTHER=\"other\";$provide.value(\"$locale\",{DATETIME_FORMATS:{AMPMS:[\"AM\",\"PM\"],DAY:[\"Sunday\",\"Monday\",\"Tuesday\",\"Wednesday\",\"Thursday\",\"Friday\",\"Saturday\"],ERANAMES:[\"Before Christ\",\"Anno Domini\"],ERAS:[\"BC\",\"AD\"],FIRSTDAYOFWEEK:6,MONTH:[\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"],SHORTDAY:[\"Sun\",\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\"],SHORTMONTH:[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"],STANDALONEMONTH:[\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"],WEEKENDRANGE:[5,6],fullDate:\"EEEE, MMMM d, y\",longDate:\"MMMM d, y\",medium:\"MMM d, y h:mm:ss a\",mediumDate:\"MMM d, y\",mediumTime:\"h:mm:ss a\",short:\"M/d/yy h:mm a\",shortDate:\"M/d/yy\",shortTime:\"h:mm a\"},NUMBER_FORMATS:{CURRENCY_SYM:\"$\",DECIMAL_SEP:\".\",GROUP_SEP:\",\",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:\"-\",negSuf:\"\",posPre:\"\",posSuf:\"\"},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:\"-¤\",negSuf:\"\",posPre:\"¤\",posSuf:\"\"}]},id:\"en\",localeID:\"en\",pluralCat:function(n,opt_precision){var i=0|n,vf=function(n,opt_precision){var v=opt_precision;void 0===v&&(v=Math.min(function(n){var i=(n+=\"\").indexOf(\".\");return-1==i?0:n.length-i-1}(n),3));var base=Math.pow(10,v);return{v:v,f:(n*base|0)%base}}(n,opt_precision);return 1==i&&0==vf.v?PLURAL_CATEGORY_ONE:PLURAL_CATEGORY_OTHER}})}]);\n\"use strict\";\n\n(function () {\n  'use strict';\n  /*global Popper */\n\n  angular.module('app').component('home', {\n    controller: HomeController,\n    controllerAs: 'vm',\n    templateUrl: 'app/home/home.view.html'\n  });\n  /** @ngInject */\n\n  function HomeController($log, $rootScope, $translate, $timeout, TreeNodeFactory) {\n    var vm = this;\n    var TreeNode = TreeNodeFactory; // Scope variables go here:\n\n    vm.productTree = [];\n    vm.selectedNode = null;\n    vm.nodeFilter = '';\n    vm.nodeForm = {};\n    vm.switchLanguage = switchLanguage;\n    vm.selectNode = selectNode;\n    vm.isNodeSelected = isNodeSelected;\n    vm.expandChildren = expandChildren;\n    vm.collapseChildren = collapseChildren;\n    vm.deleteCurrentNode = deleteCurrentNode;\n    vm.openNodeFormModal = openNodeFormModal;\n    vm.closeNodeFormModal = closeNodeFormModal;\n    vm.submitNodeFormModal = submitNodeFormModal;\n    activate();\n\n    function initalizeTree() {\n      var rootNode = new TreeNode('confec', 'Campos Confecções').addChild(new TreeNode('berma', 'Bermudas'));\n      var subNode1 = new TreeNode('calca', 'Calças').addChild(new TreeNode('calca01', 'Sarja (m)')).addChild(new TreeNode('calca02', 'Social'));\n      rootNode.addChild(subNode1);\n      var subNode2 = new TreeNode('camisas', 'Camisas').addChild(new TreeNode('camisa01', 'Esporte')).addChild(new TreeNode('camisa02', 'Gola Polo'));\n      var subNode2Child = new TreeNode('camisa03', 'Grife').addChild(new TreeNode('grife01', 'Dudalina'));\n      subNode2.addChild(subNode2Child);\n      subNode2.addChild(new TreeNode('camisa04', 'Social'));\n      rootNode.addChild(subNode2);\n      rootNode.addChild(new TreeNode('terno', 'Terno'));\n      vm.productTree = [rootNode];\n      vm.selectedNode = rootNode;\n    }\n\n    function isNodeSelected(node) {\n      return vm.selectedNode === node;\n    }\n\n    function activate() {\n      initalizeTree();\n    }\n\n    function switchLanguage(language) {\n      $translate.use(language);\n    }\n\n    function selectNode(node) {\n      vm.selectedNode = vm.selectedNode == node ? null : node;\n    }\n\n    function setExpandForChildren(expand) {\n      if (vm.selectedNode == null) {\n        vm.productTree.forEach(function (node) {\n          return node.expandChildren(expand);\n        });\n      }\n\n      vm.selectedNode.expandChildren(expand);\n    }\n\n    function expandChildren() {\n      setExpandForChildren(true);\n    }\n\n    function collapseChildren() {\n      setExpandForChildren(false);\n    }\n\n    function deleteCurrentNode() {\n      if (vm.selectedNode.isRootNode()) {\n        var selectedNodeIndex = vm.productTree.findIndex(function (node) {\n          return node === vm.selectedNode;\n        });\n        vm.productTree.splice(selectedNodeIndex, 1);\n      }\n\n      vm.selectedNode.selfDelete();\n      vm.selectedNode = vm.productTree[0] || [];\n    }\n\n    function getNodeFormModalElement() {\n      return document.querySelector('#nodeFormModal');\n    }\n\n    function toastError(referenceElement, message) {\n      var toast = document.createElement('span');\n      toast.setAttribute('class', 'toast error');\n      toast.innerText = message;\n      document.body.appendChild(toast);\n      new Popper(referenceElement, toast, {\n        placement: 'right'\n      });\n      $timeout(function () {\n        toast.parentNode.removeChild(toast);\n      }, 1000);\n    }\n\n    function openNodeFormModal($event, action) {\n      var reference = $event.currentTarget;\n      vm.nodeFormAction = action || 'create';\n\n      if (vm.nodeFormAction == 'edit') {\n        if (vm.selectedNode == null) {\n          $translate('home.editErrorNoNodeSelected').then(toastError.bind(this, reference));\n          return;\n        }\n\n        vm.nodeForm = {\n          id: vm.selectedNode.id,\n          description: vm.selectedNode.description,\n          aditionalInfo: vm.selectedNode.aditionalInfo\n        };\n      }\n\n      var modal = getNodeFormModalElement();\n      modal.classList.remove('hidden');\n      new Popper(reference, modal, {\n        placement: 'right'\n      });\n    }\n\n    function closeNodeFormModal() {\n      var modal = getNodeFormModalElement();\n      modal.classList.add('hidden'); //if its called even if form is not valid should clear the form so a create operation wouldnt be prefilled\n      //the create operation should keep values if form was invalid and the user closed it\n\n      if (vm.nodeFormAction == 'edit') {\n        vm.nodeForm = {};\n      }\n    }\n\n    function validateNodeForm(nodeForm) {\n      var idIsValid = nodeForm.id && nodeForm.id.length > 3;\n      var descriptionIsValid = nodeForm.description && nodeForm.description.length > 3;\n      return idIsValid && descriptionIsValid;\n    }\n\n    function createNewNode(nodeForm) {\n      var newNode = new TreeNode(nodeForm.id, nodeForm.description, nodeForm.aditionalInfo);\n\n      if (vm.selectedNode == null) {\n        vm.productTree.push(newNode);\n        return;\n      }\n\n      vm.selectedNode.addChild(newNode);\n    }\n\n    function editCurrentNode(nodeForm) {\n      var formIsValid = validateNodeForm(vm.nodeForm);\n\n      if (!formIsValid) {\n        return;\n      }\n\n      Object.assign(vm.selectedNode, nodeForm);\n    }\n\n    function submitNodeFormModal() {\n      var formIsValid = validateNodeForm(vm.nodeForm);\n\n      if (!formIsValid) {\n        return;\n      }\n\n      if (vm.nodeFormAction == 'create') {\n        createNewNode(vm.nodeForm);\n      }\n\n      if (vm.nodeFormAction == 'edit') {\n        editCurrentNode(vm.nodeForm);\n      }\n\n      vm.nodeForm = {};\n      closeNodeFormModal();\n    }\n  }\n})();\n\n\n\"use strict\";\n\n(function () {\n  'use strict';\n\n  angular.module('app').run(runBlock);\n  /** @ngInject */\n\n  function runBlock($document, $log, $rootScope, tmhDynamicLocale) {\n    $rootScope.$on('$translateChangeSuccess', function (event, data) {\n      // eslint-disable-line angular/on-watch\n      tmhDynamicLocale.set(data.language);\n      $document[0].documentElement.setAttribute('lang', data.language);\n    });\n    $log.debug('App run block end');\n  }\n})();\n\n\n\"use strict\";\n\n(function () {\n  'use strict';\n\n  angular.module('app').config(routerConfig);\n  /** @ngInject */\n\n  function routerConfig($stateProvider, $urlRouterProvider) {\n    $stateProvider.state('home', {\n      url: '/',\n      component: 'home'\n    });\n    $urlRouterProvider.otherwise('/');\n  }\n})();\n\n\n\"use strict\";\n\n(function () {\n  'use strict';\n\n  angular.module('app').constant('SAMPLE_CONSTANT', 'Sample constant');\n})();\n\n\n\"use strict\";\n\n(function () {\n  'use strict';\n\n  angular.module('app').config(configBlock);\n  /** @ngInject */\n\n  function configBlock($locationProvider, $logProvider, $translateProvider, tmhDynamicLocaleProvider) {\n    $locationProvider.html5Mode(true);\n    $logProvider.debugEnabled(true);\n    $translateProvider.useStaticFilesLoader({\n      // Update `config.locales.directory` in `gulp/config.js` if change.\n      prefix: '/locales/',\n      suffix: '.json'\n    }).preferredLanguage('en').fallbackLanguage('en').useSanitizeValueStrategy('escape').useMissingTranslationHandlerLog();\n    tmhDynamicLocaleProvider. // Angular locales pattern used by `buildAngularLocales()` in\n    // `gulp/locales.js`.\n    localeLocationPattern('/locales/angular-locale_{{locale}}.js').defaultLocale('en');\n  }\n})();\n\n\nangular.module('app').run(['$templateCache', function($templateCache) {$templateCache.put('app/home/home.view.html','<h1>Treasy Dev Warriors Challenge</h1><div class=container><div class=row><div class=col-sm-4><div class=\"card fluid\"><div class=section><h3>{{ \\'home.productsTreeTitle\\' | translate }}</h3></div><div class=\"section no-padding\"><div class=row><div class=\"col-sm-6 icon-group left\"><i class=material-icons ng-click=\"vm.openNodeFormModal($event, \\'create\\')\">add</i> <i class=material-icons ng-click=\"vm.openNodeFormModal($event, \\'edit\\')\">edit</i> <i class=material-icons ng-click=vm.deleteCurrentNode()>delete</i></div><div class=\"col-sm-6 icon-group right\"><i class=material-icons ng-click=vm.expandChildren()>expand_more</i> <i class=material-icons ng-click=vm.collapseChildren()>expand_less</i></div></div><div class=\"input-group fluid no-margin\"><input type=text name=nodeFilter id=nodeFilter ng-model=vm.nodeFilter class=fluid placeholder=\"{{ \\'home.productsFilterInputPlaceholder\\' | translate }}\"></div></div><div class=\"section no-padding\"><div class=root-node ng-repeat=\"node in vm.productTree\" ng-include=\"\\'app/treenode/treenode.html\\'\"></div></div></div></div><div class=col-sm-8><div class=\"card fluid\">Content</div></div></div></div><div id=nodeFormModal class=\"modal hidden\"><!-- <div class=\"modal-arrow\"></div> --><div class=\"card large\"><div class=\"header section\"><h3 class=modal-title>{{ \\'home.newProductNodeTitle\\' | translate }}</h3><i class=\"material-icons modal-close\" ng-click=vm.closeNodeFormModal()>close</i></div><div class=section><div class=row><div class=col-sm-4><label for=node-id>{{ \\'home.newProductIdLabel\\' | translate }}</label></div><div class=col-sm><input type=text id=node-id ng-model=vm.nodeForm.id ng-disabled=\"vm.nodeFormAction == \\'edit\\'\" required placeholder=\"{{ \\'home.newProductIdPlaceholder\\' | translate }}\"></div></div><div class=row><div class=col-sm-4><label for=node-description>{{ \\'home.newProductDescriptionLabel\\' | translate }}</label></div><div class=col-sm><input type=text id=node-description ng-model=vm.nodeForm.description required placeholder=\"{{ \\'home.newProductDescriptionPlaceholder\\' | translate }}\"></div></div><div class=row><div class=col-sm-4><label for=node-aditionalinfo>{{ \\'home.newProductAditionalInfoLabel\\' | translate }}</label></div><div class=col-sm><textarea id=node-aditionalinfo ng-model=vm.nodeForm.aditionalInfo rows=5 placeholder=\"{{ \\'home.newProductAditionalInfoPlaceholder\\' | translate }}\"></textarea></div></div><div class=row><div class=col-sm style=\"text-align: right\"><button class=primary ng-click=vm.submitNodeFormModal()>{{ \\'home.newProductButtonCreate\\' | translate }}</button></div></div></div></div></div>');\n$templateCache.put('app/treenode/treenode.html','<div class=tree-node ng-show=node.filter(vm.nodeFilter) ng-class=\"node.expanded ? \\'expanded\\' :\\'collapsed\\'\"><div class=node-content ng-click=vm.selectNode(node) ng-class=\"{\\'selected\\': vm.isNodeSelected(node)}\"><div ng-click=node.toggle() class=node-toggle ng-if=\"node.children.length > 0\"></div><div class=\"node-link tooltip no-border right\" aria-label=\"{{node.id}} - {{node.description}} {{node.aditionalInfo}}\">{{node.description}}</div></div><div class=node-children ng-include src=\"\\'app/treenode/treenode.html\\'\" class=children ng-repeat=\"node in node.children\"></div></div>');}]);"]}